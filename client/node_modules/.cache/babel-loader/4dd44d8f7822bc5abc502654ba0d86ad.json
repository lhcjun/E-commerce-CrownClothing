{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\Andrei's Course\\\\CRA\\\\E-commerce-CrownClothing\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport HomePage from './pages/homepage/homepage.component';\nimport ShopPage from './pages/shop/shop.component';\nimport SignInAndSignUpPage from './pages/signIn-and-sigUp/signIn-and-sigUp.component';\nimport CheckoutPage from './pages/checkout/checkout.component';\nimport ContactPage from './pages/contact/contact.component';\nimport Header from './components/header/header.component';\nimport ScrollToTop from './components/scroll-to-top/ScrollToTop';\nimport { auth, createUserProfileDocument, addCollectionAndDocuments } from './firebase/firebase.utils';\nimport { setCurrentUser } from './redux/user/user.actions';\nimport { selectCurrentUser } from './redux/user/user.selectors';\nimport { selectCollectionsForPreview } from './redux/shop/shop.selectors';\nimport './App.css';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.unsubscribeFromAuth = null;\n  }\n\n  componentDidMount() {\n    const {\n      setCurrentUser,\n      collectionsArray\n    } = this.props;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        /* not  null / sign out */\n\n        /* get document reference back from firebase.utils */\n        const userRef = await createUserProfileDocument(userAuth);\n        /* listen to doc snapShop obj update > Get user actual data (snapShot) when every update  */\n\n        userRef.onSnapshot(snapShot => {\n          /* set state > sign in */\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data()\n          });\n        });\n      } else {\n        /* set state > sign out */\n        setCurrentUser(userAuth);\n        /* null */\n      }\n\n      addCollectionAndDocuments('collections', collectionsArray);\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Router, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ScrollToTop, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(HomePage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/shop\",\n      component: ShopPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 15\n      }\n    }), \"  \", /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/contact\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(ContactPage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/checkout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CheckoutPage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/signin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }\n    }, \"        \", this.props.currentUser ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 43\n      }\n    }) : /*#__PURE__*/React.createElement(SignInAndSignUpPage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 65\n      }\n    }))))));\n  }\n\n}\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  collectionsArray: selectCollectionsForPreview\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["C:/Users/USER/Desktop/Andrei's Course/CRA/E-commerce-CrownClothing/src/App.js"],"names":["React","Component","BrowserRouter","Router","Switch","Route","Redirect","connect","createStructuredSelector","HomePage","ShopPage","SignInAndSignUpPage","CheckoutPage","ContactPage","Header","ScrollToTop","auth","createUserProfileDocument","addCollectionAndDocuments","setCurrentUser","selectCurrentUser","selectCollectionsForPreview","App","unsubscribeFromAuth","componentDidMount","collectionsArray","props","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","data","componentWillUnmount","render","currentUser","mapStateToProps","mapDispatchToProps","dispatch","user"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\n\r\nimport HomePage from './pages/homepage/homepage.component';\r\nimport ShopPage from './pages/shop/shop.component';\r\nimport SignInAndSignUpPage from './pages/signIn-and-sigUp/signIn-and-sigUp.component';\r\nimport CheckoutPage from './pages/checkout/checkout.component';\r\nimport ContactPage from './pages/contact/contact.component';\r\n\r\nimport Header from './components/header/header.component';\r\nimport ScrollToTop from './components/scroll-to-top/ScrollToTop';\r\nimport { auth, createUserProfileDocument, addCollectionAndDocuments } from './firebase/firebase.utils';\r\nimport { setCurrentUser } from './redux/user/user.actions';\r\nimport { selectCurrentUser } from './redux/user/user.selectors';\r\nimport { selectCollectionsForPreview } from './redux/shop/shop.selectors';\r\n\r\nimport './App.css';\r\n\r\n\r\nclass App extends Component {\r\n\r\n  unsubscribeFromAuth = null;\r\n\r\n  componentDidMount(){\r\n    const { setCurrentUser, collectionsArray } = this.props;\r\n\r\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\r\n      if(userAuth){  /* not  null / sign out */\r\n        /* get document reference back from firebase.utils */\r\n        const userRef = await createUserProfileDocument(userAuth)\r\n\r\n        /* listen to doc snapShop obj update > Get user actual data (snapShot) when every update  */\r\n        userRef.onSnapshot(snapShot => {\r\n          /* set state > sign in */\r\n          setCurrentUser({ id: snapShot.id, ...snapShot.data() })\r\n        })\r\n      }else{\r\n          /* set state > sign out */\r\n        setCurrentUser(userAuth)  /* null */\r\n    }\r\n      addCollectionAndDocuments('collections', collectionsArray);\r\n  })\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    this.unsubscribeFromAuth();\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div>\r\n        <Router>\r\n          <ScrollToTop>\r\n            <Header />\r\n            <Switch>\r\n              <Route exact={true} path='/'>       \r\n                <HomePage />\r\n              </Route>\r\n              <Route path='/shop' component={ShopPage} />  {/* 3.0  component={Page} */}\r\n              <Route exact path='/contact'>       \r\n                <ContactPage />\r\n              </Route>\r\n              <Route exact path='/checkout'>\r\n                <CheckoutPage />\r\n              </Route>\r\n              <Route exact path='/signin'>        {/* 3.0  render */}\r\n                {this.props.currentUser ? <Redirect to='/' /> : <SignInAndSignUpPage/>}\r\n              </Route>\r\n            </Switch>\r\n          </ScrollToTop>\r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  currentUser: selectCurrentUser,\r\n  collectionsArray: selectCollectionsForPreview\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setCurrentUser: user => dispatch(setCurrentUser(user))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);"]},"metadata":{},"sourceType":"module"}